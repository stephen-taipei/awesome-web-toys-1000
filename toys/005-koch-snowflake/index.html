<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>#005 Koch Snowflake 科赫雪花 | Awesome Web Toys</title>
    <meta name="description" content="科赫雪花分形生成器 - 觀察簡單規則如何創造無限複雜的美麗雪花">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- SVG 畫布 -->
    <svg id="canvas" viewBox="0 0 800 800" preserveAspectRatio="xMidYMid meet">
        <defs>
            <!-- 漸層定義 -->
            <linearGradient id="snowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#a78bfa;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#f472b6;stop-opacity:1" />
            </linearGradient>
            <!-- 發光效果 -->
            <filter id="glow">
                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                <feMerge>
                    <feMergeNode in="coloredBlur"/>
                    <feMergeNode in="SourceGraphic"/>
                </feMerge>
            </filter>
        </defs>
        <!-- 背景 -->
        <rect width="100%" height="100%" fill="#0a0a15"/>
        <!-- 科赫雪花路徑 -->
        <path id="koch-path" fill="none" stroke="url(#snowGradient)" stroke-width="2" filter="url(#glow)"/>
    </svg>

    <!-- 控制面板 -->
    <div id="controls">
        <h1>❄️ 科赫雪花 Koch Snowflake</h1>

        <div class="control-group">
            <label>迭代次數: <span id="iteration-display">0</span></label>
            <input type="range" id="iteration-slider" min="0" max="7" value="0" step="1">
            <div class="iteration-marks">
                <span>0</span>
                <span>1</span>
                <span>2</span>
                <span>3</span>
                <span>4</span>
                <span>5</span>
                <span>6</span>
                <span>7</span>
            </div>
        </div>

        <div class="control-group">
            <label>初始形狀</label>
            <div class="shape-buttons">
                <button class="shape-btn active" data-shape="triangle" title="三角形">
                    <svg viewBox="0 0 30 30"><polygon points="15,3 27,27 3,27" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                </button>
                <button class="shape-btn" data-shape="square" title="正方形">
                    <svg viewBox="0 0 30 30"><rect x="4" y="4" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                </button>
                <button class="shape-btn" data-shape="hexagon" title="六邊形">
                    <svg viewBox="0 0 30 30"><polygon points="15,2 27,9 27,21 15,28 3,21 3,9" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                </button>
                <button class="shape-btn" data-shape="line" title="單線段">
                    <svg viewBox="0 0 30 30"><line x1="3" y1="15" x2="27" y2="15" stroke="currentColor" stroke-width="2"/></svg>
                </button>
            </div>
        </div>

        <div class="control-group">
            <label>
                <input type="checkbox" id="fill-toggle">
                <span>填充內部</span>
            </label>
        </div>

        <div class="control-group">
            <label>
                <input type="checkbox" id="animate-toggle" checked>
                <span>平滑動畫</span>
            </label>
        </div>

        <div class="stats">
            <div class="stat-row">
                <span>邊數:</span>
                <strong id="edges-display">3</strong>
            </div>
            <div class="stat-row">
                <span>周長比:</span>
                <strong id="perimeter-display">1.00x</strong>
            </div>
            <div class="stat-row">
                <span>頂點數:</span>
                <strong id="vertices-display">3</strong>
            </div>
        </div>
    </div>

    <!-- 數學說明 -->
    <div id="math-panel">
        <h2>數學特性</h2>
        <div class="formula">
            <p>每次迭代後：</p>
            <ul>
                <li>邊數 × <strong>4</strong></li>
                <li>每邊長度 × <strong>1/3</strong></li>
                <li>周長 × <strong>4/3</strong></li>
            </ul>
            <p class="highlight">當迭代 → ∞ 時：<br>周長 → <strong>∞</strong>，但面積 → <strong>有限值</strong></p>
        </div>
    </div>

    <!-- 快速迭代按鈕 -->
    <div id="quick-buttons">
        <button class="quick-btn" data-iteration="0">0</button>
        <button class="quick-btn" data-iteration="1">1</button>
        <button class="quick-btn" data-iteration="2">2</button>
        <button class="quick-btn" data-iteration="3">3</button>
        <button class="quick-btn" data-iteration="4">4</button>
        <button class="quick-btn" data-iteration="5">5</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
